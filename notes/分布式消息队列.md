# 分布式消息队列

[toc]

---

## Why MQ ?

1.  异步处理

2.  削峰填谷

    先把请求放到消息队列，消费者可以按照自己的需求，慢慢去取

    >   比如, 12点来了10w个请求, 如果直接处理，会大幅提高服务器压力，但如果放进消息队列，处理系统就能以
    >
    >   恒定的速率来处理请求

## 分布式消息队列的优势

1.  数据持久化: 将数据集中存储到硬盘里面
2.  可扩展性: 根据需求，随时增加或者减少节点
3.  应用解耦: 连接不同语言, 框架开发的系统

4.  发布订阅: 一个应用程序发出消息，让订阅的应用程序可以自取 

## 应用场景

1.  耗时
2.  高并发
3.  分布式系统协作(跨团队, 跨业务协作)
4.  强稳定场景

## 缺点

1.  额外开销
2.  消息丢失, 顺序性, 重复消费, 数据一致性

## 主流消息队列

| 消息队列   | 吞吐量 | 时效性         | 可用性 | 可靠性 | 优势                                                         |
| ---------- | ------ | -------------- | ------ | ------ | ------------------------------------------------------------ |
| `activemq` | 万级   | 高             | 高     | 高     | 简单易用                                                     |
| `rabbitmq` | 万级   | 极高(可达微秒) | 高     | 高     | 生态好，时效性高，易学,适合大部分分布式应用                  |
| `kafka`    | 十万级 | 高             | 极高   | 极高   | 吞吐量大, 可靠性, 可用性, 强大的数据流处理能力, 适合大规模处理数据的场景 |
| `rocketmq` | 十万级 | 高             | 极高   | 极高   | 吞吐量大, 可靠性，可用性，可拓展性(尤其适用金融)             |
| `pulsar`   | 十万级 | 高             | 极高   | 极高   | 可靠性，可用性，基于发布订阅(云原生)适合实时分析,事件流处理, ioT数据处理 |



